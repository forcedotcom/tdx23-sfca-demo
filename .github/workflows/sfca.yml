name: Review
on:
    workflow_dispatch:
    pull_request:
        types: [opened, synchronize, reopened]
        branches: [main]
jobs:
    review:
        name: ReviewSource
        runs-on: 'ubuntu-latest'
        steps:
            - name: Execute Code Analyzer
              uses: rmohan20/code-analyzer-action@interfacing
              with:
                  github_token: ${{ secrets.GITHUB_TOKEN }}
                  runtype: simple
                  engine: "pmd, sfge"
                  projectdir: "force-app/main/default"
                  outfile: "sfca_result.json"
            
            - name: Download results
                uses: actions/download-artifact@v3
                with:
                    name: SFCA-Results

            - name: Print results
                run: cat sfca_result.json